<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GreenCore - Community Item Exchange System UI Mockup</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
<style>
  *, *::before, *::after {
    box-sizing: border-box;
  }
  body {
    margin:0;
    font-family: 'Poppins', sans-serif;
    background: #fff;
    color: #222;
    line-height: 1.5;
  }
  a {
    color: #4CAF50;
    text-decoration: none;
    font-weight: 600;
  }
  a:hover, a:focus {
    text-decoration: underline;
  }
  button {
    font-family: 'Poppins', sans-serif;
    border: 2px solid #4CAF50;
    background: transparent;
    color: #4CAF50;
    font-weight: 700;
    cursor: pointer;
    padding: 10px 20px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    transition: background 0.2s ease, color 0.2s ease;
  }
  button:hover, button:focus {
    background: #4CAF50;
    color: #fff;
  }
  header {
    border-bottom: 2px solid #4CAF50;
    height: 60px;
    display: flex;
    align-items: center;
    padding: 0 32px;
  }
  header .logo {
    font-weight: 700;
    font-size: 24px;
    color: #4CAF50;
    user-select: none;
  }
  #app {
    display: flex;
    min-height: calc(100vh - 60px);
  }
  nav.sidebar {
    border-right: 2px solid #4CAF50;
    background: #fff;
    width: 260px;
    padding-top: 16px;
    position: sticky;
    top: 60px;
    height: calc(100vh - 60px);
    display: flex;
    flex-direction: column;
  }
  nav.sidebar .menu-item {
    font-weight: 700;
    padding: 16px 32px;
    color: #4CAF50;
    cursor: pointer;
    border-left: 4px solid transparent;
    display: flex;
    align-items: center;
    gap: 12px;
    user-select: none;
  }
  nav.sidebar .menu-item.active {
    border-left-color: #4CAF50;
    background: #e8f5e9;
  }
  nav.sidebar .menu-item:hover {
    background: #d0f0d6;
  }
  nav.sidebar .menu-item.logout {
    margin-top: auto;
    border-left-color: transparent !important;
    color: #a30f0f;
    border-color: #a30f0f;
  }
  nav.sidebar .menu-item.logout:hover {
    background: #f9d6d6;
    color: #640606;
  }
  main.content-area {
    flex-grow: 1;
    padding: 32px 48px;
    background: #fff;
    overflow-y: auto;
  }
  h2, h3 {
    font-weight: 700;
    color: #4CAF50;
    margin-bottom: 16px;
  }
  form {
    max-width: 600px;
    margin: 0 auto 40px auto;
  }
  label {
    font-weight: 700;
    margin-bottom: 6px;
    display: block;
    color: #4CAF50;
  }
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="date"],
  select,
  textarea,
  input[type="file"] {
    width: 100%;
    border: 2px solid #4CAF50;
    padding: 10px 14px;
    margin-bottom: 24px;
    font-size: 1rem;
    font-weight: 400;
    transition: border-color 0.2s;
    font-family: 'Poppins', sans-serif;
  }
  input[type="text"]:focus,
  input[type="email"]:focus,
  input[type="password"]:focus,
  input[type="number"]:focus,
  input[type="date"]:focus,
  select:focus,
  textarea:focus,
  input[type="file"]:focus {
    outline: none;
    border-color: #2e7d32;
  }
  textarea {
    resize: vertical;
    min-height: 100px;
  }
  .form-toggle-link {
    text-align: center;
    margin-top: -18px;
    margin-bottom: 24px;
    cursor: pointer;
    color: #4caf50;
    font-weight: 700;
  }
  .form-toggle-link:hover, .form-toggle-link:focus {
    text-decoration: underline;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    border-top: 2px solid #4CAF50;
    margin-top: 20px;
  }
  th, td {
    border: 2px solid #4CAF50;
    padding: 12px 18px;
    text-align: left;
    font-weight: 700;
    font-size: 0.95rem;
    color: #222;
  }
  th {
    background: transparent;
  }
  tbody tr:hover {
    background: #d0f0d6;
  }
  .status-label {
    font-weight: 700;
    text-transform: uppercase;
    padding: 4px 12px;
    display: inline-block;
  }
  .status-pending {
    background: #fbc02d;
    color: #111;
    border: 2px solid #b8860b;
  }
  .status-diterima {
    background: #4CAF50;
    color: #fff;
  }
  .status-ditolak {
    background: #a30f0f;
    color: #fff;
  }
  .summary-cards {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
    margin-bottom: 40px;
  }
  .card {
    flex: 1 1 180px;
    border: 2px solid #4CAF50;
    background: #fff;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-weight: 700;
    color: #4CAF50;
    text-align: center;
  }
  .card h3 {
    margin: 0 0 10px 0;
    font-size: 2rem;
  }
  .item-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(260px,1fr));
    gap: 18px;
  }
  .item-card {
    border: 2px solid #4CAF50;
    padding: 14px 18px;
    background: #fff;
    font-weight: 600;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    min-height: 250px;
  }
  .item-name {
    font-size: 1.15rem;
    margin-bottom: 6px;
    color: #2e7d32;
    font-weight: 700;
  }
  .item-desc {
    font-weight: 400;
    margin-bottom: 12px;
    flex-grow: 1;
    color: #333;
  }
  .item-meta {
    font-weight: 600;
    margin-bottom: 6px;
    color: #4caf50;
  }
  .item-status {
    margin-bottom: 12px;
  }
  .item-actions button {
    width: 100%;
  }
  .filters {
    max-width: 600px;
    margin: 0 auto 28px auto;
    display: flex;
    gap: 18px;
    flex-wrap: wrap;
    justify-content: center;
  }
  .filters select {
    border: 2px solid #4CAF50;
    font-size: 1rem;
    font-weight: 600;
    padding: 8px 14px;
    background: #fff;
    cursor: pointer;
  }
  .action-btn {
    border: 2px solid #4CAF50;
    background: transparent;
    color: #4CAF50;
    font-weight: 700;
    padding: 6px 14px;
    margin-right: 8px;
    text-transform: uppercase;
  }
  .action-btn:hover {
    background: #4CAF50;
    color: white;
  }
  .action-approve {
    border-color: #4CAF50;
    color: #4CAF50;
  }
  .action-approve:hover {
    background: #4CAF50;
    color: #fff;
  }
  .action-reject {
    border-color: #a30f0f;
    color: #a30f0f;
  }
  .action-reject:hover {
    background: #a30f0f;
    color: white;
  }
  @media (max-width: 768px) {
    nav.sidebar {
      position: fixed;
      width: 240px;
      height: 100vh;
      top: 0;
      left: -240px;
      z-index: 300;
      transition: left 0.3s ease;
      border-right: 2px solid #4caf50;
      background: #fff;
      padding-top: 16px;
      display: flex;
      flex-direction: column;
    }
    nav.sidebar.visible {
      left: 0;
    }
    main.content-area {
      padding: 24px 16px;
      min-height: 100vh;
    }
    #app {
      flex-direction: column;
    }
    header {
      justify-content: space-between;
    }
    .menu-toggle {
      display: inline-flex;
      cursor: pointer;
      font-size: 28px;
      color: #4CAF50;
      background: none;
      border: none;
      user-select: none;
    }
    .filters {
      flex-direction: column;
      align-items: center;
    }
  }
</style>
</head>
<body>
<header>
  <div class="logo" tabindex="0">GreenCore</div>
</header>
<div id="app">
  <nav class="sidebar" aria-label="Primary">
    <div id="sidebar-menu"></div>
  </nav>
  <main class="content-area" tabindex="0" id="main-content"></main>
</div>
<script>
  const state = {
    isLoggedIn: false,
    userRole: null,
    currentView: 'login',
    userName: 'Budi Santoso',
  };

  const demoData = {
    barangWaitingVerification: [
      { id: 1, nama: 'Lampu LED Bekas', user: 'Andi Wijaya', status: 'Pending' },
      { id: 2, nama: 'Buku Tulis', user: 'Rani Lestari', status: 'Pending' },
      { id: 3, nama: 'Meja Kayu', user: 'Sari Dewi', status: 'Pending' },
    ],
    exchangeRequestsPending: [
      { id: 101, namaBarang: 'Kamera Analog', user: 'Budi Santoso', status: 'Pending', penerima: 'Indah Permata' },
      { id: 102, namaBarang: 'Tas Ransel', user: 'Indah Permata', status: 'Pending', penerima: 'Andi Wijaya' },
    ],
    memberBarangList: [
      { id: 201, nama: 'Baju Bekas', deskripsi: 'Baju casual ukuran M', kategori: 'Pakaian', kondisi: 'Baik', nilaiGuna: '3 bulan', jumlah: 2, status: 'Terverifikasi' },
      { id: 202, nama: 'Sepeda', deskripsi: 'Sepeda gunung, kondisi bagus', kategori: 'Alat Olahraga', kondisi: 'Sangat Baik', nilaiGuna: '1 tahun', jumlah: 1, status: 'Terverifikasi' },
      { id: 203, nama: 'Komik Koleksi', deskripsi: 'Komik komedi edisi terbaru', kategori: 'Buku', kondisi: 'Baik', nilaiGuna: '6 bulan', jumlah: 5, status: 'Menunggu Verifikasi' },
    ],
    usersList: [
      { id: 'u1', name: 'Andi Wijaya' },
      { id: 'u2', name: 'Rani Lestari' },
      { id: 'u3', name: 'Sari Dewi' },
      { id: 'u4', name: 'Budi Santoso' },
      { id: 'u5', name: 'Indah Permata' },
    ],
    riwayatPertukaran: [
      { id: 201, namaBarang: 'Lampu LED Bekas', penerima: 'Rani Lestari', tanggal: '2023-04-15', status: 'Diterima' },
      { id: 202, namaBarang: 'Buku Tulis', penerima: 'Andi Wijaya', tanggal: '2023-05-22', status: 'Ditolak' },
      { id: 203, namaBarang: 'Sepeda', penerima: 'Sari Dewi', tanggal: '2023-06-10', status: 'Diterima' },
    ],
  };

  function el(tag, attrs = {}, children = []) {
    const element = document.createElement(tag);
    Object.entries(attrs).forEach(([key, val]) => {
      if(key === 'className') element.className = val;
      else if(key === 'textContent') element.textContent = val;
      else if(key.startsWith('aria')) element.setAttribute(key, val);
      else if(key === 'tabindex') element.tabIndex = val;
      else element.setAttribute(key, val); 
    });
    if(Array.isArray(children)){
      children.forEach(child => {
        if(typeof child === 'string') element.appendChild(document.createTextNode(child));
        else element.appendChild(child);
      });
    }
    return element;
  }

  const NAV_MENUS = {
    admin: [
      { id: 'dashboard-admin', label: 'Dashboard', icon: 'dashboard' },
      { id: 'verif-barang', label: 'Verifikasi Barang', icon: 'fact_check' },
      { id: 'verif-pertukaran', label: 'Verifikasi Pertukaran', icon: 'pending_actions' },
      { id: 'kelola-barang', label: 'Kelola Barang', icon: 'inventory' },
      { id: 'logout', label: 'Keluar', icon: 'logout' },
    ],
    member: [
      { id: 'dashboard-member', label: 'Dashboard', icon: 'dashboard' },
      { id: 'daftar-barang', label: 'Daftar Barang', icon: 'view_list' },
      { id: 'tambah-barang', label: 'Tambah Barang', icon: 'add_box' },
      { id: 'ajukan-pertukaran', label: 'Ajukan Pertukaran', icon: 'swap_horiz' },
      { id: 'riwayat', label: 'Riwayat', icon: 'history' },
      { id: 'logout', label: 'Keluar', icon: 'logout' },
    ],
  };

  function renderSidebar(){
    const container = document.getElementById('sidebar-menu');
    container.innerHTML = '';
    if(!state.isLoggedIn) return;
    const menus = NAV_MENUS[state.userRole] ?? [];
    menus.forEach(menu=>{
      const div = el('div',{
        className: 'menu-item' + (state.currentView === menu.id ? ' active' : ''),
        role: 'button',
        tabindex: '0',
        'data-id': menu.id,
        ariaLabel: menu.label
      },[
        el('i',{ className:'material-icons' }, [menu.icon]),
        el('span',{}, [menu.label])
      ]);
      div.addEventListener('click',()=>{
        if(menu.id === 'logout'){
          doLogout();
        } else {
          changeView(menu.id);
        }
      });
      div.addEventListener('keydown', e=>{
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          div.click();
        }
      });
      container.appendChild(div);
    });
  }

  function renderLoginRegister(){
    const main = document.getElementById('main-content');
    function renderForm(isLogin=true){
      main.innerHTML = '';
      const form = el('form',{id:'auth-form', novalidate:true});
      form.appendChild(el('label',{for:'email', textContent:'Email'}));
      const emailInput = el('input',{type:'email', id:'email', name:'email', required:true, autocomplete:'username'});
      form.appendChild(emailInput);
      form.appendChild(el('label',{for:'password', textContent:'Password'}));
      const passwordInput = el('input',{type:'password', id:'password', name:'password', required:true, autocomplete:isLogin?'current-password':'new-password'});
      form.appendChild(passwordInput);
      if(!isLogin){
        form.appendChild(el('label',{for:'confirm_password', textContent:'Confirm Password'}));
        const confirmInput = el('input',{type:'password', id:'confirm_password', name:'confirm_password', required:true, autocomplete:'new-password'});
        form.appendChild(confirmInput);
      }
      const submitBtn = el('button',{type:'submit', className:'btn', textContent: isLogin?'Login':'Register'});
      form.appendChild(submitBtn);
      const toggleLink = el('div',{className:'form-toggle-link', role:'button', tabindex:'0'}, [isLogin?'Belum punya akun? Register':'Sudah punya akun? Login']);
      toggleLink.addEventListener('click', () => renderForm(!isLogin));
      toggleLink.addEventListener('keydown', e => { if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); toggleLink.click(); } });
      form.addEventListener('submit', e=>{
        e.preventDefault();
        const email = emailInput.value.trim();
        const password = passwordInput.value.trim();
        if(!email || !password){ alert('Harap lengkapi email dan password.'); return; }
        if(!isLogin){
          const confirmPass = form.querySelector('#confirm_password').value.trim();
          if(password !== confirmPass){ alert('Password dan konfirmasi tidak sama.'); return; }
        }
        state.isLoggedIn = true;
        state.userRole = email.toLowerCase().includes('admin')?'admin':'member';
        state.currentView = state.userRole === 'admin' ? 'dashboard-admin' : 'dashboard-member';
        renderApp();
      });
      main.appendChild(form);
      main.appendChild(toggleLink);
    }
    renderForm(true);
  }

  function changeView(view){
    state.currentView = view;
    renderSidebar();
    renderContent();
  }

  function doLogout(){
    state.isLoggedIn = false;
    state.userRole = null;
    state.currentView = 'login';
    renderSidebar();
    renderContent();
  }

  function renderContent(){
    const main = document.getElementById('main-content');
    main.scrollTop = 0;
    if(!state.isLoggedIn){
      renderLoginRegister();
      return;
    }
    switch(state.currentView){
      case 'dashboard-admin': return renderAdminDashboard();
      case 'verif-barang': return renderVerifBarang();
      case 'verif-pertukaran': return renderVerifPertukaran();
      case 'kelola-barang': return renderKelolaBarang();
      case 'dashboard-member': return renderMemberDashboard();
      case 'daftar-barang': return renderDaftarBarang();
      case 'tambah-barang': return renderTambahBarang();
      case 'ajukan-pertukaran': return renderAjukanPertukaran();
      case 'riwayat': return renderRiwayat();
      default: main.textContent = `Halaman tidak ditemukan: ${state.currentView}`;
    }
  }

  // Admin Views
  function renderAdminDashboard(){
    const main = document.getElementById('main-content');
    main.innerHTML = '';
    main.appendChild(el('h2',{textContent:'Dashboard Admin'}));
    main.appendChild(el('h3',{textContent:'Barang Menunggu Verifikasi'}));
    main.appendChild(renderAdminTableBarang());
    main.appendChild(el('h3',{textContent:'Permintaan Pertukaran Pending'}));
    main.appendChild(renderAdminTablePertukaran());
  }
  function renderAdminTableBarang(){
    const table = el('table');
    const thead = el('thead');
    const tbody = el('tbody');
    thead.innerHTML = `<tr><th>Nama Barang</th><th>User</th><th>Status</th><th>Aksi</th></tr>`;
    demoData.barangWaitingVerification.forEach(item=>{
      const tr = el('tr');
      tr.appendChild(el('td',{textContent:item.nama}));
      tr.appendChild(el('td',{textContent:item.user}));
      const statusTd = el('td');
      const statusLabel = el('span',{className:'status-label status-pending', textContent:item.status});
      statusTd.appendChild(statusLabel);
      tr.appendChild(statusTd);
      const aksiTd = el('td');
      const approveBtn = el('button',{className:'action-btn action-approve', textContent:'Approve', title:'Setujui Barang'});
      approveBtn.addEventListener('click', ()=>{
        alert(`Barang "${item.nama}" disetujui.`);
        item.status = 'Diterima';
        renderContent();
      });
      const rejectBtn = el('button',{className:'action-btn action-reject', textContent:'Reject', title:'Tolak Barang'});
      rejectBtn.addEventListener('click', ()=>{
        alert(`Barang "${item.nama}" ditolak.`);
        item.status = 'Ditolak';
        renderContent();
      });
      aksiTd.appendChild(approveBtn);
      aksiTd.appendChild(rejectBtn);
      tr.appendChild(aksiTd);
      tbody.appendChild(tr);
    });
    table.appendChild(thead);
    table.appendChild(tbody);
    return table;
  }
  function renderAdminTablePertukaran(){
    const table = el('table');
    const thead = el('thead');
    const tbody = el('tbody');
    thead.innerHTML = `<tr><th>Nama Barang</th><th>User</th><th>Nama Penerima</th><th>Status</th><th>Aksi</th></tr>`;
    demoData.exchangeRequestsPending.forEach(req=>{
      const tr = el('tr');
      tr.appendChild(el('td',{textContent:req.namaBarang}));
      tr.appendChild(el('td',{textContent:req.user}));
      tr.appendChild(el('td',{textContent:req.penerima}));
      const statusTd = el('td');
      const statusLabel = el('span',{className:'status-label status-pending', textContent:req.status});
      statusTd.appendChild(statusLabel);
      tr.appendChild(statusTd);
      const aksiTd = el('td');
      const approveBtn = el('button',{className:'action-btn action-approve', textContent:'Approve'});
      approveBtn.onclick = () => {
        alert(`Pertukaran "${req.namaBarang}" disetujui.`);
        req.status = 'Diterima';
        renderContent();
      };
      const rejectBtn = el('button',{className:'action-btn action-reject', textContent:'Reject'});
      rejectBtn.onclick = () => {
        alert(`Pertukaran "${req.namaBarang}" ditolak.`);
        req.status = 'Ditolak';
        renderContent();
      };
      aksiTd.appendChild(approveBtn);
      aksiTd.appendChild(rejectBtn);
      tr.appendChild(aksiTd);
      tbody.appendChild(tr);
    });
    table.appendChild(thead);
    table.appendChild(tbody);
    return table;
  }
  function renderVerifBarang(){
    const main = document.getElementById('main-content');
    main.innerHTML = '';
    main.appendChild(el('h2',{textContent:'Verifikasi Barang'}));
    main.appendChild(renderAdminTableBarang());
  }
  function renderVerifPertukaran(){
    const main = document.getElementById('main-content');
    main.innerHTML = '';
    main.appendChild(el('h2',{textContent:'Verifikasi Pertukaran'}));
    main.appendChild(renderAdminTablePertukaran());
  }
  function renderKelolaBarang(){
    const main = document.getElementById('main-content');
    main.innerHTML = '';
    main.appendChild(el('h2',{textContent:'Kelola Barang'}));
    const allBarang = [
      ...demoData.barangWaitingVerification.map(b => ({...b, jenis:'Menunggu Verifikasi'})),
      ...demoData.memberBarangList.map(b => ({nama:b.nama, user:state.userName, status:b.status, jenis:'Terverifikasi/Member'})),
    ];
    const table = el('table');
    const thead = el('thead');
    const tbody = el('tbody');

    thead.innerHTML = `<tr><th>Nama Barang</th><th>User</th><th>Status</th><th>Jenis</th><th>Aksi</th></tr>`;

    allBarang.forEach(item=>{
      const tr = el('tr');
      tr.appendChild(el('td',{textContent:item.nama}));
      tr.appendChild(el('td',{textContent:item.user}));
      const statusClass = item.status === 'Pending' || item.status === 'Menunggu Verifikasi' ? 'status-pending' :
        item.status === 'Diterima' || item.status === 'Terverifikasi' ? 'status-diterima' :
        item.status === 'Ditolak' ? 'status-ditolak' : 'status-pending';
      const statusLabel = el('span',{className:'status-label ' + statusClass, textContent:item.status});
      const statusTd = el('td');
      statusTd.appendChild(statusLabel);
      tr.appendChild(statusTd);
      tr.appendChild(el('td',{textContent:item.jenis || '-'}));
      const aksiTd = el('td');
      const editBtn = el('button',{className:'action-btn action-approve', textContent:'Edit', title:'Edit Barang'});
      const deleteBtn = el('button',{className:'action-btn action-reject', textContent:'Delete', title:'Hapus Barang'});
      editBtn.onclick = () => alert(`Edit fitur belum diimplementasi untuk "${item.nama}".`);
      deleteBtn.onclick = () => {
        if(confirm(`Anda yakin ingin menghapus barang "${item.nama}"?`)) {
          alert(`Barang "${item.nama}" telah dihapus (simulasi).`);
          const idxInWait = demoData.barangWaitingVerification.findIndex(b=>b.id===item.id);
          if(idxInWait !== -1) demoData.barangWaitingVerification.splice(idxInWait, 1);
          const idxInMem = demoData.memberBarangList.findIndex(b=>b.nama===item.nama);
          if(idxInMem !== -1) demoData.memberBarangList.splice(idxInMem, 1);
          renderContent();
        }
      };
      aksiTd.appendChild(editBtn);
      aksiTd.appendChild(deleteBtn);
      tr.appendChild(aksiTd);
      tbody.appendChild(tr);
    });
    table.appendChild(thead);
    table.appendChild(tbody);
    main.appendChild(table);
  }

  // Member Views
  function renderMemberDashboard(){
    const main = document.getElementById('main-content');
    main.innerHTML = '';
    main.appendChild(el('h2',{textContent:'Dashboard Anggota'}));
    main.appendChild(el('p',{textContent:`Welcome, ${state.userName}!`, style:'font-weight:700; font-size:1.25rem; color:#4caf50; margin-bottom:32px;'}));
    const sums = el('div',{className:'summary-cards'});
    sums.appendChild(summaryCard('Barang Terdaftar', demoData.memberBarangList.length));
    sums.appendChild(summaryCard('Pertukaran Berlangsung', 2));
    sums.appendChild(summaryCard('Selesai', 5));
    main.appendChild(sums);
  }
  function summaryCard(title,count){
    return el('div',{className:'card'},[
      el('h3',{textContent:count}),
      el('p',{textContent:title}),
    ]);
  }
  function renderDaftarBarang(){
    const main = document.getElementById('main-content');
    main.innerHTML = '';
    main.appendChild(el('h2',{textContent:'Daftar Barang'}));
    const filters = el('div',{className:'filters'});
    const kategoriSelect = el('select',{id:'filter-kategori','aria-label':'Filter Kategori'},['Semua Kategori','Pakaian','Alat Olahraga','Buku'].map(k=>el('option',{value:k==='Semua Kategori'?'':k},[k])));
    const kondisiSelect = el('select',{id:'filter-kondisi','aria-label':'Filter Kondisi'},['Semua Kondisi','Sangat Baik','Baik','Cukup'].map(k=>el('option',{value:k==='Semua Kondisi'?'':k},[k])));
    filters.appendChild(kategoriSelect);
    filters.appendChild(kondisiSelect);
    main.appendChild(filters);
    const grid = el('div',{className:'item-grid', id:'items-grid'});
    main.appendChild(grid);
    function filterRender(){
      const kategori = kategoriSelect.value.toLowerCase();
      const kondisi = kondisiSelect.value.toLowerCase();
      grid.innerHTML = '';
      const filtered = demoData.memberBarangList.filter(i=>{
        return (kategori?i.kategori.toLowerCase()===kategori:true) && (kondisi?i.kondisi.toLowerCase()===kondisi:true);
      });
      if(filtered.length===0){
        grid.appendChild(el('p',{textContent:'Tidak ada item ditemukan dengan filter tersebut.'}));
        return;
      }
      filtered.forEach(item=>grid.appendChild(renderItemCard(item)));
    }
    kategoriSelect.addEventListener('change',filterRender);
    kondisiSelect.addEventListener('change',filterRender);
    filterRender();
  }
  function renderItemCard(item){
    const card = el('article',{className:'item-card',tabindex:'0',role:'region','aria-label':'Item: ' + item.nama});
    const details = el('div',{className:'item-details'},[
      el('div',{className:'item-name'},[item.nama]),
      el('div',{className:'item-desc'},[item.deskripsi]),
      el('div',{className:'item-meta'},['Kondisi: ' + item.kondisi]),
      el('div',{className:'item-status'},[el('span',{className:'status-label ' + (item.status==='Terverifikasi'?'status-diterima':(item.status === 'Menunggu Verifikasi'?'status-pending':'')), textContent:item.status})]),
    ]);
    const btn = el('button',{className:'btn', textContent:'Ajukan Pertukaran', type:'button'});
    btn.addEventListener('click', ()=>{
      state.currentView = 'ajukan-pertukaran';
      renderSidebar();
      renderContent();
      setTimeout(()=>{
        const selectBarang = document.getElementById('select-barang');
        if(selectBarang) selectBarang.value = item.id;
      },100);
    });
    const actions = el('div',{className:'item-actions'},[btn]);
    card.appendChild(details);
    card.appendChild(actions);
    return card;
  }
  function renderTambahBarang(){
    const main = document.getElementById('main-content');
    main.innerHTML = '';
    main.appendChild(el('h2',{textContent:'Form Tambah Barang'}));
    const form = el('form',{id:'tambah-barang-form',novalidate:true,className:'container'});
    form.appendChild(el('label',{for:'nama-barang',textContent:'Nama Barang'}));
    form.appendChild(el('input',{type:'text',id:'nama-barang',name:'nama-barang',required:true}));
    form.appendChild(el('label',{for:'deskripsi',textContent:'Deskripsi'}));
    form.appendChild(el('textarea',{id:'deskripsi',name:'deskripsi',required:true}));
    form.appendChild(el('label',{for:'kategori',textContent:'Kategori'}));
    const catSelect = el('select',{id:'kategori',name:'kategori',required:true},[
      el('option',{value:'',disabled:true,selected:true},['Pilih Kategori']),
      el('option',{value:'Pakaian'},['Pakaian']),
      el('option',{value:'Alat Olahraga'},['Alat Olahraga']),
      el('option',{value:'Buku'},['Buku']),
      el('option',{value:'Elektronik'},['Elektronik']),
      el('option',{value:'Perabotan'},['Perabotan']),
    ]);
    form.appendChild(catSelect);
    form.appendChild(el('label',{for:'kondisi',textContent:'Kondisi'}));
    const condSelect = el('select',{id:'kondisi',name:'kondisi',required:true},[
      el('option',{value:'',disabled:true,selected:true},['Pilih Kondisi']),
      el('option',{value:'Sangat Baik'},['Sangat Baik']),
      el('option',{value:'Baik'},['Baik']),
      el('option',{value:'Cukup'},['Cukup']),
    ]);
    form.appendChild(condSelect);
    form.appendChild(el('label',{for:'nilai-guna',textContent:'Nilai Guna (misal: 3 bulan)'}));
    form.appendChild(el('input',{type:'text',id:'nilai-guna',name:'nilai-guna',required:true}));
    form.appendChild(el('label',{for:'jumlah',textContent:'Jumlah'}));
    form.appendChild(el('input',{type:'number',id:'jumlah',name:'jumlah',min:1,required:true}));
    form.appendChild(el('label',{for:'upload-gambar',textContent:'Upload Gambar'}));
    form.appendChild(el('input',{type:'file',id:'upload-gambar',name:'upload-gambar',accept:'image/*'}));
    form.appendChild(el('button',{type:'submit',className:'btn',textContent:'Daftarkan Barang'}));
    form.addEventListener('submit', e=>{
      e.preventDefault();
      const data = new FormData(form);
      const newBarang = {
        id: Math.floor(Math.random()*10000)+300,
        nama: data.get('nama-barang').trim(),
        deskripsi: data.get('deskripsi').trim(),
        kategori: data.get('kategori'),
        kondisi: data.get('kondisi'),
        nilaiGuna: data.get('nilai-guna').trim(),
        jumlah: parseInt(data.get('jumlah'), 10),
        status: 'Menunggu Verifikasi',
      };
      if(!newBarang.nama||!newBarang.deskripsi||!newBarang.kategori||!newBarang.kondisi||!newBarang.nilaiGuna||!newBarang.jumlah){
        alert('Mohon lengkapi semua data.');
        return;
      }
      demoData.memberBarangList.push(newBarang);
      alert(`Barang "${newBarang.nama}" berhasil didaftarkan dan menunggu verifikasi.`);
      form.reset();
      changeView('daftar-barang');
    });
    main.appendChild(form);
  }
  function renderAjukanPertukaran(){
    const main = document.getElementById('main-content');
    main.innerHTML = '';
    main.appendChild(el('h2',{textContent:'Ajukan Pertukaran'}));
    const form = el('form',{id:'ajukan-pertukaran-form',className:'container',novalidate:true});
    form.appendChild(el('label',{for:'select-barang',textContent:'Pilih Barang yang ingin ditukar'}));
    const barangSelect = el('select',{id:'select-barang',name:'select-barang',required:true});
    barangSelect.appendChild(el('option',{value:'',disabled:true,selected:true},['-- Pilih Barang --']));
    demoData.memberBarangList.forEach(b=>{
      barangSelect.appendChild(el('option',{value:b.id},[b.nama + ' (' + b.kondisi + ')']));
    });
    form.appendChild(barangSelect);
    form.appendChild(el('label',{for:'select-penerima',textContent:'Pilih Penerima'}));
    const penerimaSelect = el('select',{id:'select-penerima',name:'select-penerima',required:true});
    penerimaSelect.appendChild(el('option',{value:'',disabled:true,selected:true},['-- Pilih Penerima --']));
    demoData.usersList.filter(u=>u.name!==state.userName).forEach(u=>{
      penerimaSelect.appendChild(el('option',{value:u.id},[u.name]));
    });
    form.appendChild(penerimaSelect);
    form.appendChild(el('label',{for:'tanggal-pertukaran',textContent:'Tanggal Pertukaran'}));
    form.appendChild(el('input',{type:'date',id:'tanggal-pertukaran',name:'tanggal-pertukaran',required:true,min:new Date().toISOString().split('T')[0]}));
    form.appendChild(el('button',{type:'submit',className:'btn',textContent:'Ajukan Pertukaran'}));
    form.onsubmit = e=>{
      e.preventDefault();
      const barangId = barangSelect.value;
      const penerimaId = penerimaSelect.value;
      const tanggal = form['tanggal-pertukaran'].value;
      if(!barangId||!penerimaId||!tanggal){
        alert('Lengkapi semua field.');
        return;
      }
      const barang = demoData.memberBarangList.find(b=>b.id==barangId);
      const penerima = demoData.usersList.find(u=>u.id===penerimaId);
      if(!barang || !penerima){
        alert('Barang atau penerima tidak valid.');
        return;
      }
      demoData.exchangeRequestsPending.push({
        id: Math.floor(Math.random()*10000)+500,
        namaBarang: barang.nama,
        user: state.userName,
        status: 'Pending',
        tanggalPertukaran: tanggal,
        penerima: penerima.name,
      });
      alert(`Permintaan pertukaran barang "${barang.nama}" kepada "${penerima.name}" telah diajukan.`);
      form.reset();
      changeView('dashboard-member');
    };
    main.appendChild(form);
  }
  function renderRiwayat(){
    const main = document.getElementById('main-content');
    main.innerHTML = '';
    main.appendChild(el('h2',{textContent:'Riwayat Pertukaran'}));
    if(demoData.riwayatPertukaran.length===0){
      main.appendChild(el('p',{textContent:'Belum ada riwayat pertukaran yang tersedia.'}));
      return;
    }
    const table = el('table');
    const thead = el('thead');
    const tbody = el('tbody');
    thead.innerHTML = `<tr><th>Nama Barang</th><th>Penerima</th><th>Tanggal</th><th>Status</th></tr>`;
    demoData.riwayatPertukaran.forEach(item=>{
      const tr = el('tr');
      tr.appendChild(el('td',{textContent:item.namaBarang}));
      tr.appendChild(el('td',{textContent:item.penerima}));
      tr.appendChild(el('td',{textContent:item.tanggal}));
      const statusClass = item.status==='Diterima'?'status-diterima':(item.status==='Ditolak'?'status-ditolak':'status-pending');
      const statusLabel = el('span',{className:'status-label ' + statusClass, textContent:item.status});
      const statusTd = el('td');
      statusTd.appendChild(statusLabel);
      tr.appendChild(statusTd);
      tbody.appendChild(tr);
    });
    table.appendChild(thead);
    table.appendChild(tbody);
    main.appendChild(table);
  }
  function renderApp(){
    renderSidebar();
    renderContent();
  }
  renderApp();
  const menuToggle = document.querySelector('.menu-toggle');
  const sidebar = document.querySelector('nav.sidebar');
  menuToggle.addEventListener('click', () => {
    sidebar.classList.toggle('visible');
    menuToggle.setAttribute('aria-expanded', sidebar.classList.contains('visible'));
  });
  document.body.addEventListener('click', e => {
    if(!sidebar.contains(e.target) && !menuToggle.contains(e.target) && sidebar.classList.contains('visible')){
      sidebar.classList.remove('visible');
      menuToggle.setAttribute('aria-expanded', false);
    }
  });
</script>
</body>
</html>

